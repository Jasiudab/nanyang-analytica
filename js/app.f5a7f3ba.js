(function(t){function e(e){for(var a,o,s=e[0],c=e[1],l=e[2],d=0,h=[];d<s.length;d++)o=s[d],r[o]&&h.push(r[o][0]),r[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(h.length)h.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},r={app:0},i=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/nanyang-analytica/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("64a9"),r=n.n(a);r.a},1:function(t,e){},"1d62":function(t,e,n){},2:function(t,e){},2445:function(t,e,n){var a=n("795b"),r=n("24f8");function i(t){return new a(function(e,n){var a=r.get(t,function(t){if(t.statusCode<200||t.statusCode>=300)return n(new Error("statusCode="+t.statusCode));t.setEncoding("utf8");var a="";t.on("data",function(t){a+=t}),t.on("end",function(){try{a=JSON.parse(a.slice(21,a.length-2))}catch(t){n(t)}e(a)})});a.on("error",function(t){n(t)}),a.end()})}t.exports=i},"2dae":function(t,e,n){"use strict";var a=n("dc9f"),r=n.n(a);r.a},3:function(t,e){},4:function(t,e){},5:function(t,e){},"53bb":function(t,e,n){var a=n("795b"),r={},i={fetch:function(t){return new a(function(e,n){var a=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.src=t,i.addEventListener("load",function(){e(r)}),a.appendChild(i)})},callback:function(t){r=t}};t.exports=i},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{mobile:t.mobile},attrs:{id:"app"}},[a("div",{staticClass:"top",attrs:{id:"top"}}),a("sidebar",{attrs:{isOpen:t.sidebarOpen,query:t.searchQuery,loadDynamic:t.loadData,dataFields:t.dataConfig,set:t.setSidebarOpen,load:t.searchForTweets,mobile:t.mobile,update:t.updatePreloaded}}),a("img",{staticClass:"logo-lion",attrs:{src:n("9279"),alt:""}}),a("main",{class:{squizzer:!t.sidebarOpen},attrs:{id:"page-wrap"}},[a("div",{staticClass:"container mt-4"},[a("search-bar",{class:{"d-none":t.sidebarOpen},attrs:{query:t.searchQuery,load:t.searchForTweets}}),t.pending?a("div",[a("loader",{staticClass:"whole-page",attrs:{loading:t.pending,text:t.loadingText}})],1):a("twitts",{attrs:{twitts:t.displayedTwitts,loadPage:t.loadPage,info:t.info,sort:t.sortBy,open:t.sidebarOpen,runAI:t.runAI,text:t.pageText}})],1),t._m(0)])],1)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"tooltipContent"}},[n("p",[t._v("\n        Avaiable fields are: name, body "),n("br"),t._v("\n        For tips on use go to "),n("a",{attrs:{rel:"noopener noreferrer",target:"_blank",href:"https://lunrjs.com/guides/searching.html#wildcards"}},[n("strong",[t._v("Lunr")])])])])}],o=n("795b"),s=n.n(o),c=(n("96cf"),n("3b8d")),l=(n("55dd"),n("386d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ScaleRotate",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.close,expression:"close"}],attrs:{disableOutsideClick:"",noOverlay:"",crossIcon:!1,width:"320",isOpen:t.isOpen},on:{openMenu:function(e){return t.set(!0)},closeMenu:t.close}},[a("div",{staticClass:"flex brand"},[a("img",{attrs:{height:"100px",src:n("d939"),alt:""}}),a("span",{staticClass:"align-self-center"},[t._v("\n            Nanyang\n            Analytica\n        ")])]),t.isOpen?a("div",{staticClass:"row px-4"},[a("div",{staticClass:"col-12"},[a("h5",{staticClass:"text-uppercase"},[t._v("Search")]),a("form",{attrs:{action:"#",method:"post"},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:{html:"tooltipContent",visible:!t.mobile},expression:"{ html: 'tooltipContent', visible: !mobile }",modifiers:{right:!0}}],staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.query.search,expression:"query.search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Keyword"},domProps:{value:t.query.search},on:{input:function(e){e.target.composing||t.$set(t.query,"search",e.target.value)}}})]),a("div",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:{content:"Not working yet",visible:!t.mobile},expression:"{ content: 'Not working yet', visible: !mobile }",modifiers:{right:!0}}]},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Gender")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.query.gender,expression:"query.gender"}],staticClass:"form-control",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.query,"gender",e.target.multiple?n:n[0])}}},[a("option",[t._v("Male")]),a("option",[t._v("Female")])])]),a("div",{staticClass:"form-group mb-4"},[a("label",{attrs:{for:"customRange1"}},[t._v("Age: "+t._s(t.query.age[0])+" - "+t._s(t.query.age[1]))]),a("vue-slider",{attrs:{marks:!0,data:t.data,lazy:!0,"enable-cross":!1},model:{value:t.query.age,callback:function(e){t.$set(t.query,"age",e)},expression:"query.age"}})],1)]),a("div",{staticClass:"row justify-content-around"},[a("button",{directives:[{name:"scroll-to",rawName:"v-scroll-to",value:".top",expression:"'.top'"}],staticClass:"btn btn-warning my-2",on:{click:t.submit}},[t._v("Search")])])]),a("h5",{staticClass:"text-uppercase mt-4"},[t._v("data")]),a("div",[a("form",{attrs:{action:"#",method:"post"},on:{submit:function(e){return e.preventDefault(),t.split(e)}}},[a("div",{staticClass:"form-group mt-2"},[a("label",{attrs:{for:""}},[t._v("User Names")]),a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currUserName,expression:"currUserName"},{name:"tooltip",rawName:"v-tooltip.top",value:{content:"Type in any username to load",visible:!t.mobile},expression:"{ content: 'Type in any username to load', visible: !mobile }",modifiers:{top:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"Usernames"},domProps:{value:t.currUserName},on:{input:function(e){e.target.composing||(t.currUserName=e.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"d-none",attrs:{type:"submit"}}),a("button",{staticClass:"btn btn-outline-warning",on:{click:t.preload}},[t._v("\n                              Random\n                            ")])])])])]),a("div",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:{content:"Load our preprocessed, static data",visible:!t.mobile},expression:"{ content: 'Load our preprocessed, static data', visible: !mobile }",modifiers:{right:!0}}],staticClass:"form-group mb-4"},[a("label",{attrs:{for:"customRange1"}},[t._v("Load: "+t._s(t.asdf)+"k")]),a("vue-slider",{attrs:{marks:t.marks,lazy:!0,included:!0},model:{value:t.asdf,callback:function(e){t.asdf=e},expression:"asdf"}})],1),t.dataFields.dynamic.length>0?a("div",{staticClass:"row mb-2",staticStyle:{"max-width":"300px"}},t._l(t.dataFields.dynamic,function(e){return a("div",{key:e,staticClass:"badge badge-warning m-1 badge-name"},[a("span",[t._v("\n                                "+t._s(e)+" ")]),t._v("\n                            | "),a("span",{staticStyle:{cursor:"pointer"},on:{click:function(n){return t.remove(e)}}},[t._v(" X ")])])}),0):t._e(),a("div",{staticClass:"row justify-content-around"},[t.dataFields.dynamic.length>0&&t.asdf?a("small",{staticClass:"form-text text-muted mt-0 mb-1"},[t._v(" \n                          "+t._s(t.msg.side.load)+"\n                        ")]):t._e(),a("button",{directives:[{name:"scroll-to",rawName:"v-scroll-to",value:".top",expression:"'.top'"}],staticClass:"btn btn-warning my-2",on:{click:t.loadDataMethod}},[t._v("\n                          "+t._s(t.loadText)+"\n                        ")]),t.dataFields.dynamic.length>0?a("button",{staticClass:"btn btn-warning mb-2",on:{click:function(e){t.dataFields.dynamic=[]}}},[t._v("\n                        Clear")]):t._e()])])])]):t._e()])}),u=[],d=(n("28a5"),n("6762"),n("2fdb"),n("db0f")),h=n("4971"),f=n.n(h),p=["katyperry","BarackObama","justinbieber","taylorswift13","ladygaga","TheEllenShow","jtimberlake","ArianaGrande","KimKardashian","realDonaldTrump","selenagomez","britneyspears","jimmyfallon","BillGates","JLo","nytimes","BrunoMars","KingJames","Oprah","MileyCyrus","KevinHart4real","LilTunechi","wizkhalifa","Pink","aliciakeys","chrisbrown","kanyewest","ConanOBrien","KendallJenner","ActuallyNPH","KylieJenner","khloekardashian","pitbull","danieltosh","POTUS","elonmusk","HillaryClinton","kourtneykardash","Eminem","MariahCarey","blakeshelton","NICKIMINAJ","LeoDiCaprio","StephenAtHome","JimCarrey","aplusk","SnoopDogg","KDTrey5","ParisHilton","xtina","camerondallas","RyanSeacrest","ZacEfron","tomhanks","Diddy","POTUS44","Beyonce","Zendaya","SHAQ","maroon5","tyrabanks","BigSean","SethMacFarlane","kobebryant","nickjonas","TreySongz","funnyordie","TheRock","StephenCurry30","VancityReynolds","neiltyson","ashleytisdale","iamwill","stephenfry","RobertDowneyJr","SarahKSilverman","johnlegend","JColeNC","Usher","MichelleObama","kelly_clarkson","markiplier","mindykaling","FLOTUS","kendricklamar","Ludacris","JohnCena","jimmykimmel","charliesheen","MarcAnthony","tim_cook","ciara","BillClinton","billmaher","chrissyteigen","serenawilliams","azizansari","Pharrell","ChrisEvans","VictoriaJustice","halsey","50cent"],m={hello:"Hello! 🤗 To search Twitter type in a keyword or go to options",error:"Oh no 🥵 We couldn't find anything that matches your query",search:"Oi 🤨 We need something to search for",load:{work:"We're working on it...",search:"Warming up the search engine...",ai:"Waking up the AI 🤖...",scrape:""},side:{load:"Loading both static and dynamic fields will take a while as we need to reindex it after"}},g=m,v={components:{ScaleRotate:d["ScaleRotate"],VueSlider:f.a},data:function(){return{msg:g,asdf:10,currUserName:"",marks:[0,10,50,100],data:[0,18,23,42,100],loadText:"Load"}},methods:{loadDataMethod:function(){this.update(this.asdf),this.dataFields.static=this.asdf,this.loadText="Reload",this.loadDynamic()},submit:function(){this.set(!1),this.load()},preload:function(){var t=this,e=p.filter(function(e){return!t.dataFields.dynamic.includes(e)&&e.length>0}).sort(function(){return Math.random()-.5}).slice(0,10);this.dataFields.dynamic=this.dataFields.dynamic.concat(e)},remove:function(t){this.dataFields.dynamic=this.dataFields.dynamic.filter(function(e){return e!=t})},close:function(){this.set(!1)},split:function(){this.currUserName&&this.dataFields.dynamic.push(this.currUserName),this.currUserName=""}},watch:{currUserName:function(t){var e=t.split(" ");e.length>1&&(this.dataFields.dynamic=this.dataFields.dynamic.concat(e.filter(function(t){return t.length>0})),this.currUserName="")}},props:{isOpen:{type:Boolean,required:!0},query:{type:Object,required:!0},set:{type:Function,required:!0},load:{type:Function,required:!0},dataFields:{type:Object,required:!0},loadDynamic:{type:Function,required:!0},mobile:{type:Boolean,required:!0},update:{type:Function,required:!0}}},w=v,y=(n("2dae"),n("2877")),b=Object(y["a"])(w,l,u,!1,null,null,null),x=b.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return 0===t.twitts.length?n("div",{staticClass:"whole-page"},[n("div",{staticClass:"mx-auto text-center",staticStyle:{width:"250px","margin-top":"20vh"}},[n("span",[t._v("\n            "+t._s(t.text)+"\n        ")]),n("br"),n("br"),n("button",{staticClass:"btn btn-warning",on:{click:t.runAI}},[t._v("WAKE UP THE AI!")])])]):n("div",{staticClass:"list"},[n("div",{staticClass:"d-flex flex-row justify-content-between"},[n("div",{staticClass:"mt-2"},[t.info?n("p",{staticClass:"font-weight-bold"},[t._v("Found "+t._s(t.info.count)+" results in "+t._s(t.info.time)+" Miliseconds")]):t._e()]),n("div",{staticClass:"mb-2"},[n("div",{staticClass:"dropdown"},[n("button",{staticClass:"btn btn-warning dropdown-toggle mx-auto",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n                    Sort by\n                ")]),n("div",{staticClass:"dropdown-menu dropdown-menu-right",attrs:{"aria-labelledby":"dropdownMenuButton"}},[n("a",{staticClass:"dropdown-item",on:{click:function(e){t.sort("match"),t.loadPage(1)}}},[t._v("Best Match")]),n("a",{staticClass:"dropdown-item",on:{click:function(e){t.sort("lengthDsc"),t.loadPage(1)}}},[t._v("Long to Short")]),n("a",{staticClass:"dropdown-item",on:{click:function(e){t.sort("lengthAsc"),t.loadPage(1)}}},[t._v("Short to Long")])])])])]),t.info.count>0?n("div",{staticClass:"text-center row"},[t._l(t.twitts,function(e,a){return n("div",{key:a,staticClass:"col-lg-6 mb-2",class:{"col-6":t.open}},[n("div",{staticClass:"card hoverable"},[n("div",{staticClass:"row m-4"},[n("div",{staticClass:"col-sm-4 col-12",class:{"col-sm-12 my-4":t.open}},[n("img",{staticClass:"card-img-top",staticStyle:{width:"100px",height:"100px","border-radius":"50%"},attrs:{src:e.photo,alt:"Card image cap"}}),n("h5",{staticClass:"card-title mt-2 mb-0",domProps:{innerHTML:t._s(e.name)}}),n("small",{staticClass:"text-muted mt-0 mb-1"},[t._v(t._s(e.username)+" "+t._s(e.time))])]),t.open?t._e():n("div",{staticClass:"col-sm-8 col-12"},[n("div",{staticClass:"card-body"},[n("p",{staticClass:"card-text",domProps:{innerHTML:t._s(e.body)}}),n("a",{staticClass:"btn btn-warning",attrs:{href:e.link,rel:"noopener noreferrer",target:"_blank"}},[t._v("Go to tweet")])])])])])])}),t.twitts.length<5?n("div",{staticClass:"screen-pusher"}):t._e(),n("nav",{staticClass:"col-12 d-flex justify-content-center",attrs:{"aria-label":"Page navigation example"}},[n("ul",{directives:[{name:"scroll-to",rawName:"v-scroll-to",value:".top",expression:"'.top'"}],staticClass:"pagination text-center",staticStyle:{cursor:"pointer"}},t._l(t.noOfPages,function(e){return n("li",{key:e,staticClass:"page-item"},[n("a",{staticClass:"page-link",on:{click:function(n){return t.loadPage(e)}}},[t._v(t._s(e))])])}),0)])],2):t._e()])},_=[],C={name:"twitts",props:{runAI:{type:Function,required:!0},text:{type:String,required:!0},twitts:{type:Array,required:!0},info:{type:Object,required:!0},loadPage:{type:Function,required:!0},sort:{type:Function,required:!0},open:{type:Boolean,required:!0}},computed:{noOfPages:function(){var t=0;return this.info.count&&(t=Math.ceil(this.info.count/8)),t>10&&(t=10),t}}},O=C,T=(n("fd16"),Object(y["a"])(O,k,_,!1,null,null,null)),j=T.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row",staticStyle:{height:"80px"}},[n("div",{staticClass:"col"},[n("form",{attrs:{action:"#",method:"post"},on:{submit:function(e){return e.preventDefault(),t.load(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.query.search,expression:"query.search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Keyword"},domProps:{value:t.query.search},on:{input:[function(e){e.target.composing||t.$set(t.query,"search",e.target.value)},t.load],focus:function(e){t.show=!0},blur:function(e){t.show=!1}}}),t.show?n("small",{staticClass:"form-text text-muted mt-0 mb-1"},[t._v("Avaiable fields are: name, body.\n        For tips on use go to "),t._m(0)]):t._e()]),Object.keys(t.filteredQuery).length>0?n("div",{staticClass:"mb-4"},t._l(Object.keys(t.filteredQuery),function(e){return n("span",{key:e,staticClass:"badge badge-warning mx-2"},[t._v("\n                  "+t._s(e)+": "+t._s(t.filteredQuery[e])+" | \n                      "),n("span",{staticStyle:{cursor:"pointer"},on:{click:function(n){return t.reset(e)}}},[t._v(" X ")])])}),0):t._e()])])},S=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{attrs:{rel:"noopener noreferrer",target:"_blank",href:"https://lunrjs.com/guides/searching.html#wildcards"}},[n("strong",[t._v("Lunr")])])}],F=n("a4bb"),E=n.n(F),M=(n("ac6a"),{name:"searchBar",data:function(){return{show:!1}},props:{query:{type:Object,required:!0},load:{type:Function,required:!0}},computed:{filteredQuery:function(){var t=this,e={};return E()(this.query).forEach(function(n){t.query[n]&&(e[n]=t.query[n])}),0===this.query.age[0]&&100===this.query.age[1]&&delete e.age,e},mobile:function(){return this.windowWidth<800}},methods:{reset:function(t){"age"===t?this.query.age=[0,100]:this.query[t]="",this.load()}}}),P=M,A=Object(y["a"])(P,q,S,!1,null,null,null),N=A.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex justify-content-center mx-auto",staticStyle:{width:"200px","margin-top":"20vh"}},[n("div",[n("pacman-loader",{staticClass:"ml-3",attrs:{loading:t.loading,color:"#ffc107",size:"30px"}}),n("p",{staticClass:"mt-2 text-center",domProps:{innerHTML:t._s(t.text)}})],1)])},L=[],D=n("6746"),B={name:"loader",components:{PacmanLoader:D["a"]},props:{loading:{type:Boolean,required:!0},text:{type:String,required:!0}}},U=B,I=Object(y["a"])(U,R,L,!1,null,null,null),z=I.exports,Q=(n("b54a"),n("7f7f"),n("cebc")),W=n("d225"),J=n("b0b4"),H=n("bd86"),K=n("2f21"),$=n.n(K),G=n("9669"),V=n.n(G);function X(t){return new s.a(function(e){fetch(t).then(function(t){return t.json()}).then(function(t){e(t)})})}var Z="https://raw.githubusercontent.com/zuberek/nanyang-analytica/master/server/",Y="search/index",tt="search/store",et={small:"_small.json",medium:"_medium.json",large:"_large.json"},nt=!0;nt=!1;var at=nt,rt=function(){function t(){Object(W["a"])(this,t)}return Object(J["a"])(t,null,[{key:"init",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e,n,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=at?"search engine init":"search engine not active",console.log(e),at){t.next=4;break}return t.abrupt("return");case 4:return console.log("loading indexing..."),t.next=7,X(Z+Y+et.small);case 7:return n=t.sent,this.idx=$.a.Index.load(n),console.log("loading store..."),t.next=12,X(Z+tt+et.small);case 12:a=t.sent,this.store=a,console.log("search engine loaded");case 15:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"search",value:function(t){var e=this,n={twitts:[],time:""},a=new Date;this.idx.search(t).forEach(function(t){var a=t.matchData;n.twitts.push(Object(Q["a"])({},e.store[t.ref],{positions:a,score:t.score}))});var r=new Date-a;return n.time=r,console.log("Found "+n.twitts.length+" results in "+r+" Miliseconds"),n}},{key:"load",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e){var n,a,r,i,o,c,l,u,d,h;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e),n={},!e.preloaded){t.next=32;break}return e.preloaded=it(e.preloaded),t.next=6,new s.a(function(t){return setTimeout(t,1e3)});case 6:return console.log("Loading store..."),t.next=9,X(Z+tt+et[e.preloaded]);case 9:if(a=t.sent,!(e.dynamic.length>0)){t.next=23;break}return console.log("Loading tweets..."),n={profiles:e.dynamic,showRetweets:!1,showEmpty:!1},t.next=15,V()(n);case 15:for(o in r=t.sent,i=[],r)i=i.concat(r[o]);for(c in i=i.sort(function(){return Math.random()-.5}),a)l=a[c],i.push({author:{username:l.username,name:l.name,link:l.link,img:l.photo},id:c,time:l.time,link:l.link,body:l.body});return t.abrupt("return",i);case 23:return console.log("Loading indexing..."),t.next=26,X(Z+Y+et[e.preloaded]);case 26:return u=t.sent,this.idx=$.a.Index.load(u),this.store=a,t.abrupt("return",!1);case 30:t.next=40;break;case 32:return n={profiles:e.dynamic,showRetweets:!1,showEmpty:!1},t.next=35,V()(n);case 35:for(h in d=t.sent,i=[],d)i=i.concat(d[h]);return i=i.sort(function(){return Math.random()-.5}),t.abrupt("return",i);case 40:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"index",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e,n){var a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Indexing ".concat(e.length," tweets")),a={},r=$()(function(){this.ref("id"),this.field("body"),this.field("name"),this.metadataWhitelist=["position"],e.forEach(function(t){this.add({id:t.id,body:t.body,name:t.author.name}),a[t.id]={username:t.author.username,name:t.author.name,profile:t.author.link,photo:t.author.img,time:t.time,link:t.link,body:t.body}},this)}),n&&(this.idx=r,this.store=a),t.abrupt("return",{store:a,index:r});case 5:case"end":return t.stop()}},t,this)}));function e(e,n){return t.apply(this,arguments)}return e}()}]),t}();function it(t){switch(t){case 10:return"small";case 50:return"medium";case 100:return"large"}}Object(H["a"])(rt,"idx",void 0),Object(H["a"])(rt,"store",void 0);var ot=n("5118");function st(t,e){var n=t.metadata,a={};for(var r in n){var i=function(t){a[t]=[],n[r][t].position.forEach(function(e){a[t].push(e)})};for(var o in n[r])i(o)}var s=function(t){c=0,a[t].sort(function(t,e){return t[0]-e[0]}).forEach(function(n){var a=e[t];e[t]=a.slice(0,n[0]+c)+"<mark>"+a.slice(n[0]+c,n[0]+n[1]+c)+"</mark>"+a.slice(n[0]+n[1]+c),c+=13})};for(var o in a){var c;s(o)}return e}var ct={" ":1,e:2,o:3,t:4,a:5,i:6,n:7,s:8,r:9,l:10,h:11,d:12,u:13,m:14,y:15,c:16,g:17,w:18,p:19,"?":20,f:21,".":22,b:23,"@":24,k:25,v:26,I:27,"~":28,"#":29,T:30,A:31,"'":32,S:33,"!":34,",":35,E:36,C:37,M:38,"-":39,'"':40,":":41,O:42,N:43,R:44,P:45,H:46,L:47,D:48,W:49,B:50,F:51,G:52,1:53,")":54,0:55,x:56,j:57,"(":58,Y:59,2:60,"+":61,U:62,"\n":63,J:64,3:65,z:66,K:67,V:68,"/":69,4:70,"“":71,5:72,"”":73,"&":74,q:75,">":76,9:77,"’":78,8:79,"<":80,6:81,7:82,"[":83,"]":84,"*":85,Q:86,"|":87,"–":88,";":89,"…":90,Z:91,X:92};function lt(t,e){return new s.a(function(n,a){e.loadLayersModel("https://raw.githubusercontent.com/zuberek/nanyang-analytica/master/serve/ai/gender/model.json").then(function(e){var r=[],i=function(i){console.log("predicting "+i);var o=e.predict(t[i]);o.array().then(function(t){var e=t.map(function(t){return t[0]}),a=0;e.forEach(function(t){return a+=t}),r.push({user:i,gender:a/e.length<.5?"male":"female",average:a/e.length,predictions:e}),n(r)}).catch(function(t){console.log("Failed exporting the predictions to an array"),a(t)})};for(var o in t)i(o)}).catch(function(t){console.log("Failed loading the model"),a(t)})})}var ut=n("0b53"),dt=2e3,ht=92,ft=60,pt=function(){function t(){Object(W["a"])(this,t)}return Object(J["a"])(t,null,[{key:"init",value:function(){var t=this;return console.log("ai engine init"),new s.a(function(e){console.log("loading data..."),fetch("https://raw.githubusercontent.com/zuberek/nanyang-analytica/master/client/backend/data/data.json").then(function(t){return t.json()}).then(function(n){t.data=mt(n.slice(0,dt)),e()})})}},{key:"predictGender",value:function(){var t=this;return new s.a(function(e,n){lt(t.data,ut).then(function(t){return e(t)}).catch(function(t){return n(t)})})}}]),t}();function mt(t){var e={};for(var n in t.forEach(function(t){var n=t.author;n||console.log(t),e[n.username]||(e[n.username]=[]),e[n.username].push(t.body)}),console.log("predicting "+E()(e).length+" users"),console.log("preprocessing..."),e){var a=e[n];e[n]=a.map(function(t){return t=gt(t),t}),e[n]=ut["stack"](e[n])}return e}function gt(t){var e=t.split("");e=e.map(function(t){return ct[t]?ct[t]:ct["+"]}),e=e.slice(0,ft),e=ut["oneHot"](e,ht);var n=[[0,Math.abs(60-e.shape[0])],[0,0]];return e=e.pad(n),e}Object(H["a"])(pt,"data",void 0);var vt={name:"app",components:{Sidebar:x,Twitts:j,SearchBar:N,Loader:z},data:function(){return{msg:g,sidebarOpen:!1,searchQuery:{search:"",gender:"",age:[0,100]},dataConfig:{preloaded:"asdfasdfasdfafds",dynamic:[]},pending:!1,loadingText:g.load.work,pageText:g.hello,page:1,twitts:{},windowWidth:window.innerWidth}},params:{searchQuery:Object,sidebarOpen:Boolean},computed:{info:function(){var t={};return this.twitts.twitts&&(t.count=this.twitts.twitts.length),this.twitts.time&&(t.time=this.twitts.time),t},displayedTwitts:function(){if(!this.twitts.twitts)return[];for(var t=[],e=8*(this.page-1);e<8*this.page;e++)this.twitts.twitts[e]&&t.push(this.twitts.twitts[e]);return t.map(function(t){return st(t.positions,t)})},mobile:function(){return this.windowWidth<800}},mounted:function(){var t=this;this.start(g.load.search),this.$nextTick(function(){Object(ot["setTimeout"])(function(){rt.init().then(function(){t.pending=!1})},1),window.addEventListener("resize",function(){t.windowWidth=window.innerWidth})})},methods:{updatePreloaded:function(t){this.dataConfig.preloaded=t},setSidebarOpen:function(t){this.sidebarOpen=t},sortBy:function(t){switch(t){case"match":this.twitts.twitts.sort(function(t,e){return e.score-t.score});break;case"lengthDsc":this.twitts.twitts.sort(function(t,e){return e.body.length-t.body.length});break;case"lengthAsc":this.twitts.twitts.sort(function(t,e){return t.body.length-e.body.length});break;default:break}},searchForTweets:function(){var t=this;this.start(),Object(ot["setTimeout"])(function(){if(!t.searchQuery.search)return t.pageText=g.search,t.twitts=[],void(t.pending=!1);var e=rt.search(t.searchQuery.search),n=t.searchQuery,a=n.age,r=n.gender;r=r.toLowerCase(),r&&(e.twitts=e.twitts.filter(function(t){return t.gender===r})),0===a[0]&&100===a[1]||(e.twitts=e.twitts.filter(function(t){return t.age>=a[0]&&t.age<=a[1]})),t.twitts=e,t.page=1,0===e.twitts.length&&(t.pageText=g.error),Object(ot["setTimeout"])(function(){t.pending=!1},500)},10)},loadPage:function(t){t-1<1&&(t=1),t+1>10&&(t=10),this.page=t},loadData:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.start("Fetching your tweets..."),t.next=3,new s.a(function(t){return Object(ot["setTimeout"])(t,10)});case 3:return t.next=5,rt.load(this.dataConfig);case 5:e=t.sent,"undefined"!=typeof e&&e&&(this.loadingText="Indexing your tweets...",rt.index(e,!0)),this.loadingText="Quering the store...",this.cleanSeach(),n=rt.search(this.searchQuery.search),this.twitts=n,this.page=1,this.pending=!1;case 13:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),runAI:function(){var t=this;this.start(g.load.ai+"<br>Feedback in console"),pt.init().then(function(){t.loadingText="Waking up the AI ✔️<br>Predicting gender...",Object(ot["setTimeout"])(function(){pt.predictGender().then(function(e){t.loadingText=t.loadingText+" ✔️<br>Success",console.log(e)})},10)})},start:function(t){this.pending=!0,this.sidebarOpen=!1;var e=t||g.load.work;this.loadingText=e},cleanSeach:function(){this.search="",this.gender="",this.age=[0,100]}}},wt=vt,yt=(n("034f"),Object(y["a"])(wt,r,i,!1,null,null,null)),bt=yt.exports,xt=(n("4989"),n("ab8b"),n("3222")),kt=n.n(xt),_t=(n("cfbd6"),n("fe56")),Ct=n("a2df"),Ot=n.n(Ct);a["default"].use(kt.a),a["default"].use(_t["a"]),a["default"].use(Ot.a),a["default"].config.productionTip=!1,new a["default"]({render:function(t){return t(bt)}}).$mount("#app")},6:function(t,e){},"64a9":function(t,e,n){},7:function(t,e){},8:function(t,e){},"8fba":function(t,e,n){n("28a5");var a=n("795b"),r=n("cfae"),i=n("2445"),o=n("53bb"),s=function(t){this.noOfTweets=t.noOfTweets,this.url=t.url,this.extractor=new r(t),t.browser?(this.fetch=o.fetch,window.__twttr=o):this.fetch=i};function c(t,e){var n=t.split("&");return"max_position"===n[n.length-1].slice(0,12)&&(t=t.slice(0,t.length-(n[n.length-1].length+1))),t+="&max_position="+e,t}s.prototype.getTweets=function(t){var e=this;return new a(function(n,a){t.length>=e.noOfTweets?n(t):e.fetch(e.url).then(function(a){if(!a.body)return console.log("Failed a request! Url: "+e.url),void n(t);var r=e.extractor.extract(a.body);0!==r.length?(t=t.concat(r),e.url=c(e.url,a.headers.minPosition),e.getTweets(t).then(function(t){n(t)}).catch(function(a){console.log("Couldn't extract from: "+e.url+"\n"+a),n(t)})):n(t)})})},t.exports=s},9279:function(t,e,n){t.exports=n.p+"img/logo-black.83defbb4.png"},9669:function(t,e,n){n("ac6a");var a=n("795b"),r=n("8fba"),i=n("e2a0");function o(t){return new a(function(e,n){var a={};t.profiles.forEach(function(o){var c=i.getConfig(t);c.profile=o,c.url=i.getUrl(c),c.url||n(new Error("Invalid configuration!"));var l=new r(c),u=[];l.getTweets(u).then(function(n){a[o]=n.slice(0,c.noOfTweets),s(t,a)&&e(a)})})})}function s(t,e){var n=!0;return t.profiles.forEach(function(t){e[t]||(n=!1)}),n}"undefined"!==typeof window&&(window.extract=o),t.exports=o},cfae:function(t,e,n){n("7514");var a=n("02cc"),r=function(t){this.showAuthor=t.showAuthor,this.showRetweets=t.showRetweets,this.showMedia=t.showMedia,this.showEmpty=t.showEmpty};r.prototype.extract=function(t){var e=a.load(t),n=[],r=this;return e.root().find(".timeline-Tweet").map(function(t,a){var i={};if(e(this).find(".timeline-Tweet-retweetCredit").length>0?i.isRetweet=!0:i.isRetweet=!1,!i.isRetweet||i.isRetweet&&r.showRetweets){if(i.id=e(this).attr("data-tweet-id"),i.body=e(this).find(".timeline-Tweet-text").text(),i.time=e(this).find(".dt-updated").text().slice(6),i.timestamp=e(this).find(".dt-updated").attr("datetime"),i.link=e(this).find(".timeline-Tweet-timestamp").attr("href"),r.showAuthor){var o=e(this).find(".timeline-Tweet-author");i.author={},i.author.name=o.find(".TweetAuthor-name").text(),i.author.username=o.find(".TweetAuthor-screenName ").text(),i.author.link=o.find(".TweetAuthor-link").attr("href"),i.author.img=o.find(".Avatar").attr("data-src-2x")}if(r.showMedia){var s=e(this).find(".timeline-Tweet-media");s.hasClass("timeline-Tweet-media")&&(i.media=[],s.find("img").map(function(t,n){e(this).attr("data-image")&&i.media.push(e(this).attr("data-image")+"?format=jpg&name=large")}),0===i.media.length&&delete i.media)}(i.body||r.showEmpty)&&n.push(i)}}),n},t.exports=r},d939:function(t,e,n){t.exports=n.p+"img/logo-white.414824de.png"},dc9f:function(t,e,n){},e2a0:function(t,e){var n="https://syndication.twitter.com/timeline/",a="?callback=__twttr.callback&dnt=false&suppress_response_codes=true&rnd="+Math.random();function r(t){var e={};return e.showAuthor="undefined"===typeof t.showAuthor||t.showAuthor,e.showRetweets="undefined"===typeof t.showRetweets||t.showRetweets,e.showMedia="undefined"===typeof t.showMedia||t.showMedia,e.showEmpty="undefined"===typeof t.showEmpty||t.showEmpty,e.noOfTweets=t.noOfTweets?t.noOfTweets:20,e.browser="undefined"!==typeof window,e.lang=t.lang?t.lang:"en",e}function i(t){var e="";return t.profile&&(e=o(t)),t.likes&&(e=s(t)),t.list&&(e=c(t)),e}function o(t){return n+"profile"+a+"&screen_name="+t.profile+"&lang="+t.lang}function s(t){return n+"likes"+a+"&screen_name="+t.profile+"&lang="+t.lang}function c(t){return n+"list"+a+"&screen_name="+t.profile+"&list_slug="+t.list+"&lang="+t.lang}t.exports={getConfig:r,getUrl:i}},fd16:function(t,e,n){"use strict";var a=n("1d62"),r=n.n(a);r.a}});
//# sourceMappingURL=app.f5a7f3ba.js.map